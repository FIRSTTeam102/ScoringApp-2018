extends ../layout

block content
	- var matchPrefix = ''; if (match.comp_level != 'qm') matchPrefix = match.comp_level;
	h2(class="gear-text-white") Comparing alliances for match ##{match.match_number}
	- var blueTeams = match.alliances.blue.team_keys[0].substring(3)+', '+match.alliances.blue.team_keys[1].substring(3)+', '+match.alliances.blue.team_keys[2].substring(3);
	h4(class="gear-text-white") <i>Blue: #{blueTeams}</i>
	- var redTeams = match.alliances.red.team_keys[0].substring(3)+', '+match.alliances.red.team_keys[1].substring(3)+', '+match.alliances.red.team_keys[2].substring(3);
	h4(class="gear-text-white") <i>Red: #{redTeams}</i>
	h6 <i>Click on a metric to compare event teams</i>
	
	if (aggdata)
		table(class="w3-table")
			tr
				th Metric
				th(class="w3-right-align gear-text-blue") Blue<br/>Avg&nbsp;
				th(class="w3-right-align gear-text-red") Red<br/>Avg
			each agg in aggdata
				tr
					- var text = agg.key; var result1 = text.replace( /([A-Z])/g, " $1" ); var result2 = result1.charAt(0).toUpperCase() + result1.slice(1)
					td(class="w3-text-light-gray w3-small")
						a(href=`/reports/metricintel?key=${agg.key}`)= result2
					- var blueCol = 'w3-right-align w3-text-white'
					- if (agg.blue == 0) blueCol = 'w3-right-align w3-text-gray'
					td(class=`${blueCol}`)= agg.blue
					- var redCol = 'w3-right-align w3-text-white'
					- if (agg.red == 0) redCol = 'w3-right-align w3-text-gray'
					td(class=`${redCol}`)= agg.red
		p
		a(href='/reports/metricsranked') Click here to see overall ranked event data

