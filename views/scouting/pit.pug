extends ../layout

block content
	script(src="/js/pit-client.js")
	h3= key.replace('frc','Team #')
	p
	form#scoutform(name="scoutform")
		input#teamkey(type="hidden", name="teamkey", value=`${key}`)
		div(style="text-align:center")
			each element in layout
				- var answer = ""
				case element.type
					when "checkbox"
						include templates/formCheckbox
					when "counter"
						include templates/formCounterInput
					when "badcounter"
						include templates/formBadcounter
					when "multiselect"
						include templates/dropdown
					when "textblock"
						include templates/formTextblock
					when "h2"
						include templates/categoryHeader
					when "spacer"
						include templates/formSpacer
	center
		button#submit( onclick="window.onbeforeunload = null;" class="w3-btn w3-cyan") Submit
	| <script>
	each element in layout
		case element.type
			when "checkbox"
				include templates/scriptCheckbox
			when "counter"
			when "badcounter"
				include templates/scriptCounterInput
	| </script>
	script.
		window.onbeforeunload = function() {
			return "Leaving this page will lose pit scouting data.";
		};		
		var chkToggleText = function(){
			var txtInput = this.nextElementSibling.firstElementChild;
			if(this.checked){
				txtInput.disabled = false;
				txtInput.classList.remove("gear-disabled-click");
			}else{
				txtInput.disabled = true;
				txtInput.classList.add("gear-disabled-click");
			}
		}
		var chkToggleFromTxt = function(){
			var chk = this.previousElementSibling;
			chk.checked = true;
			var txtInput = this.firstElementChild;
			txtInput.disabled = false;
			txtInput.classList.remove("gear-disabled-click");
		}
		$(function(){
			$(".chkText").on('click', chkToggleText);
			$(".chkTextLabel").on('click', chkToggleFromTxt);
		});
		
	style.
		.w3-check{
			top: 7.7px!important;
		}